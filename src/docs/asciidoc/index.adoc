= NLWEB API Documentation
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 3
:sectlinks:
:operation-curl-request-title: Example request
:operation-http-response-title: Example response

[[introduction]]
== 소개

이 문서는 NLWeb 백엔드 API의 상세 명세입니다.

=== 기본 정보

* Development URL: `https://port-0-nlweb-dev-mi2pu7awb67535f7.sel3.cloudtype.app`
* Base URL: `http://localhost:8080`
* 응답 형식: JSON
* 문자 인코딩: UTF-8

=== API 응답 형식

모든 API는 다음과 같은 공통 응답 형식을 사용합니다:

[source,json]
----
{
  "success": true|false,
  "data": {Object|Array|Null}
  "message": "응답 메시지 (선택사항)",
  "timestamp": "2025-01-01T06:00:00.000Z"
}
----

=== HTTP 상태 코드

|===
| 상태 코드 | 설명
| 200 | 요청 성공
| 201 | 리소스 생성 성공
| 400 | 잘못된 요청
| 401 | 인증 실패
| 403 | 권한 부족
| 404 | 리소스 없음
| 500 | 서버 오류
|===

[[amho-api]]
== Amho API

Amho(가입 인증 코드) 관리를 위한 API입니다.

=== GET /amhos
현재 활성화된 인증 코드를 반환합니다.

.Request
include::{snippets}/amhos/get-current-amho/http-request.adoc[]

.Response
include::{snippets}/amhos/get-current-amho/http-response.adoc[]

=== POST /amhos
현재 인증 코드를 리셋합니다.

.Requst
include::{snippets}/amhos/reset-current-amho/http-request.adoc[]

.Response
include::{snippets}/amhos/reset-current-amho/http-response.adoc[]

[[auth-api]]
== Auth API

회원가입, 로그인 등 사용자 인증 관리를 위한 API 입니다.

=== POST /auth/register
회원가입을 진행합니다.

.Request
include::{snippets}/auth/register/http-request.adoc[]

.Response
include::{snippets}/auth/register/http-response.adoc[]

=== POST /auth/login
로그인을 진행합니다.

.Request
include::{snippets}/auth/login/http-request.adoc[]

.Response
include::{snippets}/auth/login/http-response.adoc[]

=== POST /auth/refresh
리프레시 토큰을 이용해 새 토큰을 발급 받습니다.

.Request
include::{snippets}/auth/refresh-token/http-request.adoc[]

.Response
include::{snippets}/auth/refresh-token/http-response.adoc[]

=== POST /auth/logout
로그아웃합니다.

.Request
include::{snippets}/auth/logout/http-request.adoc[]

.Response
include::{snippets}/auth/logout/http-response.adoc[]

[[user-api]]
== User API

사용자 프로필 조회/수정/삭제 및 사용자 검색을 위한 API 입니다.

=== GET /users/me
내 프로필을 조회합니다.

.Request
include::{snippets}/users/get-my-profile/http-request.adoc[]

.Response
include::{snippets}/users/get-my-profile/http-response.adoc[]

=== PATCH /users/me
내 프로필을 수정합니다.

.Request
include::{snippets}/users/update-my-profile/http-request.adoc[]

.Response
include::{snippets}/users/update-my-profile/http-response.adoc[]

=== DELETE /users/me
내 프로필을 삭제(탈퇴)합니다.

.Request
include::{snippets}/users/delete-my-profile/http-request.adoc[]

.Response
include::{snippets}/users/delete-my-profile/http-response.adoc[]

=== GET /users
세션/기수 기준으로 사용자를 검색합니다.

.Request
include::{snippets}/users/search-users/http-request.adoc[]

.Response
include::{snippets}/users/search-users/http-response.adoc[]

[[admin-api]]
== Admin API

집부 권한 부여/박탈, 조회 기능을 위한 API 입니다.

=== POST /admins
Amho의 adminCode를 이용해 집부 권한을 부여합니다.

.Request
include::{snippets}/admins/get-admin-authority/http-request.adoc[]

.Response
include::{snippets}/admins/get-admin-authority/http-response.adoc[]

=== GET /admins
전체 집부 리스트를 반환합니다.

.Request
include::{snippets}/admins/get-all-admins/http-request.adoc[]

.Response
include::{snippets}/admins/get-all-admins/http-response.adoc[]

=== PATCH /admins/me
내 집부 역할(회장, 관리부장 등)을 변경합니다.

.Request
include::{snippets}/admins/update-my-admin-role/http-request.adoc[]

.Response
include::{snippets}/admins/update-my-admin-role/http-response.adoc[]

=== DELETE /admins/me
내 집부 권한을 제거합니다.

.Request
include::{snippets}/admins/revoke-my-admin-authority/http-request.adoc[]

.Response
include::{snippets}/admins/revoke-my-admin-authority/http-response.adoc[]

[[program-api]]
== Program API

프로그램 생성, 수정, 참가와 같은 프로그램 제어 기능을 위한 API 입니다.

=== POST /programs
새 프로그램을 생성합니다.

.Request
include::{snippets}/programs/create-new-program/http-request.adoc[]

.Response
include::{snippets}/programs/create-new-program/http-response.adoc[]

=== PATCH /programs
프로그램 정보를 변경합니다.

.Request
include::{snippets}/programs/update-program/http-request.adoc[]

.Response
include::{snippets}/programs/update-program/http-response.adoc[]

=== POST /programs/apply
프로그램에 참가 신청합니다.

.Request
include::{snippets}/programs/apply-program/http-request.adoc[]

.Response
include::{snippets}/programs/apply-program/http-response.adoc[]

=== DELETE /programs/apply
프로그램 참가 신청을 취소합니다.

.Request
include::{snippets}/programs/cancel-program-application/http-request.adoc[]

.Response
include::{snippets}/programs/cancel-program-application/http-response.adoc[]